function cov_23v1qc2ygj(){var path="/home/lucas/Desktop/Erick Wendel Curso/JS_testing _M1/projeto/test/unitTests/carService.test.js";var hash="9de0cddd6dce21ac7d37770255aca5321a16393c";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/lucas/Desktop/Erick Wendel Curso/JS_testing _M1/projeto/test/unitTests/carService.test.js",statementMap:{"0":{start:{line:1,column:56},end:{line:1,column:72}},"1":{start:{line:2,column:19},end:{line:2,column:34}},"2":{start:{line:3,column:17},end:{line:3,column:32}},"3":{start:{line:4,column:15},end:{line:4,column:32}},"4":{start:{line:5,column:14},end:{line:5,column:30}},"5":{start:{line:7,column:19},end:{line:7,column:58}},"6":{start:{line:8,column:20},end:{line:8,column:61}},"7":{start:{line:10,column:13},end:{line:10,column:59}},"8":{start:{line:12,column:14},end:{line:16,column:1}},"9":{start:{line:18,column:0},end:{line:129,column:3}},"10":{start:{line:19,column:19},end:{line:19,column:21}},"11":{start:{line:20,column:16},end:{line:20,column:18}},"12":{start:{line:22,column:2},end:{line:24,column:5}},"13":{start:{line:23,column:4},end:{line:23,column:42}},"14":{start:{line:26,column:2},end:{line:28,column:5}},"15":{start:{line:27,column:4},end:{line:27,column:36}},"16":{start:{line:30,column:2},end:{line:32,column:5}},"17":{start:{line:31,column:4},end:{line:31,column:22}},"18":{start:{line:34,column:2},end:{line:39,column:5}},"19":{start:{line:35,column:17},end:{line:35,column:32}},"20":{start:{line:36,column:19},end:{line:36,column:62}},"21":{start:{line:38,column:4},end:{line:38,column:56}},"22":{start:{line:41,column:2},end:{line:54,column:5}},"23":{start:{line:42,column:24},end:{line:42,column:46}},"24":{start:{line:43,column:23},end:{line:43,column:24}},"25":{start:{line:45,column:4},end:{line:47,column:27}},"26":{start:{line:49,column:19},end:{line:49,column:58}},"27":{start:{line:50,column:21},end:{line:50,column:51}},"28":{start:{line:52,column:4},end:{line:52,column:70}},"29":{start:{line:53,column:4},end:{line:53,column:41}},"30":{start:{line:56,column:2},end:{line:73,column:5}},"31":{start:{line:57,column:16},end:{line:57,column:30}},"32":{start:{line:58,column:24},end:{line:58,column:61}},"33":{start:{line:59,column:4},end:{line:59,column:31}},"34":{start:{line:61,column:4},end:{line:63,column:21}},"35":{start:{line:65,column:4},end:{line:65,column:61}},"36":{start:{line:67,column:19},end:{line:67,column:64}},"37":{start:{line:69,column:21},end:{line:69,column:24}},"38":{start:{line:71,column:4},end:{line:71,column:59}},"39":{start:{line:72,column:4},end:{line:72,column:46}},"40":{start:{line:75,column:2},end:{line:92,column:5}},"41":{start:{line:76,column:21},end:{line:76,column:55}},"42":{start:{line:77,column:4},end:{line:77,column:22}},"43":{start:{line:79,column:24},end:{line:79,column:61}},"44":{start:{line:80,column:4},end:{line:80,column:29}},"45":{start:{line:82,column:25},end:{line:82,column:26}},"46":{start:{line:84,column:21},end:{line:84,column:60}},"47":{start:{line:85,column:19},end:{line:89,column:5}},"48":{start:{line:91,column:4},end:{line:91,column:46}},"49":{start:{line:94,column:2},end:{line:128,column:5}},"50":{start:{line:95,column:16},end:{line:95,column:30}},"51":{start:{line:97,column:24},end:{line:101,column:5}},"52":{start:{line:103,column:21},end:{line:103,column:55}},"53":{start:{line:104,column:4},end:{line:104,column:22}},"54":{start:{line:106,column:25},end:{line:106,column:26}},"55":{start:{line:108,column:20},end:{line:108,column:44}},"56":{start:{line:110,column:16},end:{line:110,column:37}},"57":{start:{line:112,column:4},end:{line:112,column:41}},"58":{start:{line:113,column:4},end:{line:115,column:21}},"59":{start:{line:117,column:27},end:{line:117,column:66}},"60":{start:{line:118,column:19},end:{line:118,column:77}},"61":{start:{line:120,column:21},end:{line:125,column:6}},"62":{start:{line:127,column:4},end:{line:127,column:46}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:36},end:{line:18,column:37}},loc:{start:{line:18,column:42},end:{line:129,column:1}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:22,column:9},end:{line:22,column:10}},loc:{start:{line:22,column:15},end:{line:24,column:3}},line:22},"2":{name:"(anonymous_2)",decl:{start:{line:26,column:13},end:{line:26,column:14}},loc:{start:{line:26,column:19},end:{line:28,column:3}},line:26},"3":{name:"(anonymous_3)",decl:{start:{line:30,column:12},end:{line:30,column:13}},loc:{start:{line:30,column:18},end:{line:32,column:3}},line:30},"4":{name:"(anonymous_4)",decl:{start:{line:34,column:56},end:{line:34,column:57}},loc:{start:{line:34,column:62},end:{line:39,column:3}},line:34},"5":{name:"(anonymous_5)",decl:{start:{line:41,column:62},end:{line:41,column:63}},loc:{start:{line:41,column:68},end:{line:54,column:3}},line:41},"6":{name:"(anonymous_6)",decl:{start:{line:56,column:62},end:{line:56,column:63}},loc:{start:{line:56,column:74},end:{line:73,column:3}},line:56},"7":{name:"(anonymous_7)",decl:{start:{line:75,column:96},end:{line:75,column:97}},loc:{start:{line:75,column:108},end:{line:92,column:3}},line:75},"8":{name:"(anonymous_8)",decl:{start:{line:94,column:83},end:{line:94,column:84}},loc:{start:{line:94,column:95},end:{line:128,column:3}},line:94}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0},b:{},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"9de0cddd6dce21ac7d37770255aca5321a16393c"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_23v1qc2ygj=function(){return actualCoverage;};}return actualCoverage;}cov_23v1qc2ygj();const{describe,it,before,beforeEach,afterEach}=(cov_23v1qc2ygj().s[0]++,require("mocha"));const{expect}=(cov_23v1qc2ygj().s[1]++,require("chai"));const{join}=(cov_23v1qc2ygj().s[2]++,require("path"));const assert=(cov_23v1qc2ygj().s[3]++,require("assert"));const sinon=(cov_23v1qc2ygj().s[4]++,require("sinon"));const CarService=(cov_23v1qc2ygj().s[5]++,require("../../src/service/CarService"));const Transaction=(cov_23v1qc2ygj().s[6]++,require("../../src/entities/Transaction"));const cars=(cov_23v1qc2ygj().s[7]++,join(__dirname,"../../database","cars.json"));const mocks=(cov_23v1qc2ygj().s[8]++,{validCarCategory:require("../mocks/valid-carCategory.json"),validCar:require("../mocks/valid-car.json"),validCustomer:require("../mocks/valid-customer.json")});cov_23v1qc2ygj().s[9]++;describe("Car Service suite tests",()=>{cov_23v1qc2ygj().f[0]++;let carService=(cov_23v1qc2ygj().s[10]++,{});let sandbox=(cov_23v1qc2ygj().s[11]++,{});cov_23v1qc2ygj().s[12]++;before(()=>{cov_23v1qc2ygj().f[1]++;cov_23v1qc2ygj().s[13]++;carService=new CarService({cars});});cov_23v1qc2ygj().s[14]++;beforeEach(()=>{cov_23v1qc2ygj().f[2]++;cov_23v1qc2ygj().s[15]++;sandbox=sinon.createSandbox();});cov_23v1qc2ygj().s[16]++;afterEach(()=>{cov_23v1qc2ygj().f[3]++;cov_23v1qc2ygj().s[17]++;sandbox.restore();});cov_23v1qc2ygj().s[18]++;it("should retrieve a random position from an array",()=>{cov_23v1qc2ygj().f[4]++;const data=(cov_23v1qc2ygj().s[19]++,[0,1,2,3,4]);const result=(cov_23v1qc2ygj().s[20]++,carService.getRandomPositionFromArray(data));cov_23v1qc2ygj().s[21]++;expect(result).to.be.lte(data.length).and.be.gte(0);});cov_23v1qc2ygj().s[22]++;it("should choose the first id from carIds in carCategory",()=>{cov_23v1qc2ygj().f[5]++;const carCategory=(cov_23v1qc2ygj().s[23]++,mocks.validCarCategory);const carIdIndex=(cov_23v1qc2ygj().s[24]++,0);cov_23v1qc2ygj().s[25]++;sandbox.stub(carService,carService.getRandomPositionFromArray.name).returns(carIdIndex);const result=(cov_23v1qc2ygj().s[26]++,carService.chooseRandomCar(carCategory));const expected=(cov_23v1qc2ygj().s[27]++,carCategory.carIds[carIdIndex]);cov_23v1qc2ygj().s[28]++;expect(carService.getRandomPositionFromArray.calledOnce).to.be.ok;cov_23v1qc2ygj().s[29]++;expect(result).to.be.equal(expected);});cov_23v1qc2ygj().s[30]++;it("given a carCategory it should return an available car",async()=>{cov_23v1qc2ygj().f[6]++;const car=(cov_23v1qc2ygj().s[31]++,mocks.validCar);const carCategory=(cov_23v1qc2ygj().s[32]++,Object.create(mocks.validCarCategory));cov_23v1qc2ygj().s[33]++;carCategory.ids=[car.id];cov_23v1qc2ygj().s[34]++;sandbox.stub(carService.carRepository,carService.carRepository.find.name).resolves(car);cov_23v1qc2ygj().s[35]++;sandbox.spy(carService,carService.chooseRandomCar.name);const result=(cov_23v1qc2ygj().s[36]++,await carService.getAvailableCar(carCategory));const expected=(cov_23v1qc2ygj().s[37]++,car);cov_23v1qc2ygj().s[38]++;expect(carService.chooseRandomCar.calledOnce).to.be.ok;cov_23v1qc2ygj().s[39]++;expect(result).to.be.deep.equal(expected);});cov_23v1qc2ygj().s[40]++;it("given a carCategory, customer and numberOfDays it should calculate final amount in real",async()=>{cov_23v1qc2ygj().f[7]++;const customer=(cov_23v1qc2ygj().s[41]++,Object.create(mocks.validCustomer));cov_23v1qc2ygj().s[42]++;customer.age=50;const carCategory=(cov_23v1qc2ygj().s[43]++,Object.create(mocks.validCarCategory));cov_23v1qc2ygj().s[44]++;carCategory.price=37.6;const numberOfDays=(cov_23v1qc2ygj().s[45]++,5);const expected=(cov_23v1qc2ygj().s[46]++,carService.currencyFormat.format(244.4));const result=(cov_23v1qc2ygj().s[47]++,carService.calculateFinalPrice(customer,carCategory,numberOfDays));cov_23v1qc2ygj().s[48]++;expect(result).to.be.deep.equal(expected);});cov_23v1qc2ygj().s[49]++;it("given a customer and a car category it should return a transaction receipt",async()=>{cov_23v1qc2ygj().f[8]++;const car=(cov_23v1qc2ygj().s[50]++,mocks.validCar);const carCategory=(cov_23v1qc2ygj().s[51]++,{...mocks.validCarCategory,price:37.6,carIds:[car.id]});const customer=(cov_23v1qc2ygj().s[52]++,Object.create(mocks.validCustomer));cov_23v1qc2ygj().s[53]++;customer.age=20;const numberOfDays=(cov_23v1qc2ygj().s[54]++,5);const dueDate=(cov_23v1qc2ygj().s[55]++,"10 de novembro de 2020");const now=(cov_23v1qc2ygj().s[56]++,new Date(2020,10,5));cov_23v1qc2ygj().s[57]++;sandbox.useFakeTimers(now.getTime());cov_23v1qc2ygj().s[58]++;sandbox.stub(carService.carRepository,carService.carRepository.find.name).resolves(car);const expectedAmount=(cov_23v1qc2ygj().s[59]++,carService.currencyFormat.format(206.8));const result=(cov_23v1qc2ygj().s[60]++,await carService.rent(customer,carCategory,numberOfDays));const expected=(cov_23v1qc2ygj().s[61]++,new Transaction({customer,dueDate,car,amount:expectedAmount}));cov_23v1qc2ygj().s[62]++;expect(result).to.be.deep.equal(expected);});});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwiYmVmb3JlIiwiYmVmb3JlRWFjaCIsImFmdGVyRWFjaCIsInJlcXVpcmUiLCJleHBlY3QiLCJqb2luIiwiYXNzZXJ0Iiwic2lub24iLCJDYXJTZXJ2aWNlIiwiVHJhbnNhY3Rpb24iLCJjYXJzIiwiX19kaXJuYW1lIiwibW9ja3MiLCJ2YWxpZENhckNhdGVnb3J5IiwidmFsaWRDYXIiLCJ2YWxpZEN1c3RvbWVyIiwiY2FyU2VydmljZSIsInNhbmRib3giLCJjcmVhdGVTYW5kYm94IiwicmVzdG9yZSIsImRhdGEiLCJyZXN1bHQiLCJnZXRSYW5kb21Qb3NpdGlvbkZyb21BcnJheSIsInRvIiwiYmUiLCJsdGUiLCJsZW5ndGgiLCJhbmQiLCJndGUiLCJjYXJDYXRlZ29yeSIsImNhcklkSW5kZXgiLCJzdHViIiwibmFtZSIsInJldHVybnMiLCJjaG9vc2VSYW5kb21DYXIiLCJleHBlY3RlZCIsImNhcklkcyIsImNhbGxlZE9uY2UiLCJvayIsImVxdWFsIiwiY2FyIiwiT2JqZWN0IiwiY3JlYXRlIiwiaWRzIiwiaWQiLCJjYXJSZXBvc2l0b3J5IiwiZmluZCIsInJlc29sdmVzIiwic3B5IiwiZ2V0QXZhaWxhYmxlQ2FyIiwiZGVlcCIsImN1c3RvbWVyIiwiYWdlIiwicHJpY2UiLCJudW1iZXJPZkRheXMiLCJjdXJyZW5jeUZvcm1hdCIsImZvcm1hdCIsImNhbGN1bGF0ZUZpbmFsUHJpY2UiLCJkdWVEYXRlIiwibm93IiwiRGF0ZSIsInVzZUZha2VUaW1lcnMiLCJnZXRUaW1lIiwiZXhwZWN0ZWRBbW91bnQiLCJyZW50IiwiYW1vdW50Il0sInNvdXJjZXMiOlsiY2FyU2VydmljZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZGVzY3JpYmUsIGl0LCBiZWZvcmUsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9ID0gcmVxdWlyZShcIm1vY2hhXCIpO1xuY29uc3QgeyBleHBlY3QgfSA9IHJlcXVpcmUoXCJjaGFpXCIpO1xuY29uc3QgeyBqb2luIH0gPSByZXF1aXJlKFwicGF0aFwiKTtcbmNvbnN0IGFzc2VydCA9IHJlcXVpcmUoXCJhc3NlcnRcIik7XG5jb25zdCBzaW5vbiA9IHJlcXVpcmUoXCJzaW5vblwiKTtcblxuY29uc3QgQ2FyU2VydmljZSA9IHJlcXVpcmUoXCIuLi8uLi9zcmMvc2VydmljZS9DYXJTZXJ2aWNlXCIpO1xuY29uc3QgVHJhbnNhY3Rpb24gPSByZXF1aXJlKFwiLi4vLi4vc3JjL2VudGl0aWVzL1RyYW5zYWN0aW9uXCIpO1xuXG5jb25zdCBjYXJzID0gam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vZGF0YWJhc2VcIiwgXCJjYXJzLmpzb25cIik7XG5cbmNvbnN0IG1vY2tzID0ge1xuICB2YWxpZENhckNhdGVnb3J5OiByZXF1aXJlKFwiLi4vbW9ja3MvdmFsaWQtY2FyQ2F0ZWdvcnkuanNvblwiKSxcbiAgdmFsaWRDYXI6IHJlcXVpcmUoXCIuLi9tb2Nrcy92YWxpZC1jYXIuanNvblwiKSxcbiAgdmFsaWRDdXN0b21lcjogcmVxdWlyZShcIi4uL21vY2tzL3ZhbGlkLWN1c3RvbWVyLmpzb25cIiksXG59O1xuXG5kZXNjcmliZShcIkNhciBTZXJ2aWNlIHN1aXRlIHRlc3RzXCIsICgpID0+IHtcbiAgbGV0IGNhclNlcnZpY2UgPSB7fTtcbiAgbGV0IHNhbmRib3ggPSB7fTtcblxuICBiZWZvcmUoKCkgPT4ge1xuICAgIGNhclNlcnZpY2UgPSBuZXcgQ2FyU2VydmljZSh7IGNhcnMgfSk7XG4gIH0pO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIHNhbmRib3ggPSBzaW5vbi5jcmVhdGVTYW5kYm94KCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgc2FuZGJveC5yZXN0b3JlKCk7XG4gIH0pO1xuXG4gIGl0KFwic2hvdWxkIHJldHJpZXZlIGEgcmFuZG9tIHBvc2l0aW9uIGZyb20gYW4gYXJyYXlcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBbMCwgMSwgMiwgMywgNF07XG4gICAgY29uc3QgcmVzdWx0ID0gY2FyU2VydmljZS5nZXRSYW5kb21Qb3NpdGlvbkZyb21BcnJheShkYXRhKTtcblxuICAgIGV4cGVjdChyZXN1bHQpLnRvLmJlLmx0ZShkYXRhLmxlbmd0aCkuYW5kLmJlLmd0ZSgwKTtcbiAgfSk7XG5cbiAgaXQoXCJzaG91bGQgY2hvb3NlIHRoZSBmaXJzdCBpZCBmcm9tIGNhcklkcyBpbiBjYXJDYXRlZ29yeVwiLCAoKSA9PiB7XG4gICAgY29uc3QgY2FyQ2F0ZWdvcnkgPSBtb2Nrcy52YWxpZENhckNhdGVnb3J5O1xuICAgIGNvbnN0IGNhcklkSW5kZXggPSAwO1xuXG4gICAgc2FuZGJveFxuICAgICAgLnN0dWIoY2FyU2VydmljZSwgY2FyU2VydmljZS5nZXRSYW5kb21Qb3NpdGlvbkZyb21BcnJheS5uYW1lKVxuICAgICAgLnJldHVybnMoY2FySWRJbmRleCk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBjYXJTZXJ2aWNlLmNob29zZVJhbmRvbUNhcihjYXJDYXRlZ29yeSk7XG4gICAgY29uc3QgZXhwZWN0ZWQgPSBjYXJDYXRlZ29yeS5jYXJJZHNbY2FySWRJbmRleF07XG5cbiAgICBleHBlY3QoY2FyU2VydmljZS5nZXRSYW5kb21Qb3NpdGlvbkZyb21BcnJheS5jYWxsZWRPbmNlKS50by5iZS5vaztcbiAgICBleHBlY3QocmVzdWx0KS50by5iZS5lcXVhbChleHBlY3RlZCk7XG4gIH0pO1xuXG4gIGl0KFwiZ2l2ZW4gYSBjYXJDYXRlZ29yeSBpdCBzaG91bGQgcmV0dXJuIGFuIGF2YWlsYWJsZSBjYXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNhciA9IG1vY2tzLnZhbGlkQ2FyO1xuICAgIGNvbnN0IGNhckNhdGVnb3J5ID0gT2JqZWN0LmNyZWF0ZShtb2Nrcy52YWxpZENhckNhdGVnb3J5KTtcbiAgICBjYXJDYXRlZ29yeS5pZHMgPSBbY2FyLmlkXTtcblxuICAgIHNhbmRib3hcbiAgICAgIC5zdHViKGNhclNlcnZpY2UuY2FyUmVwb3NpdG9yeSwgY2FyU2VydmljZS5jYXJSZXBvc2l0b3J5LmZpbmQubmFtZSlcbiAgICAgIC5yZXNvbHZlcyhjYXIpO1xuXG4gICAgc2FuZGJveC5zcHkoY2FyU2VydmljZSwgY2FyU2VydmljZS5jaG9vc2VSYW5kb21DYXIubmFtZSk7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYXJTZXJ2aWNlLmdldEF2YWlsYWJsZUNhcihjYXJDYXRlZ29yeSk7XG5cbiAgICBjb25zdCBleHBlY3RlZCA9IGNhcjtcblxuICAgIGV4cGVjdChjYXJTZXJ2aWNlLmNob29zZVJhbmRvbUNhci5jYWxsZWRPbmNlKS50by5iZS5vaztcbiAgICBleHBlY3QocmVzdWx0KS50by5iZS5kZWVwLmVxdWFsKGV4cGVjdGVkKTtcbiAgfSk7XG5cbiAgaXQoXCJnaXZlbiBhIGNhckNhdGVnb3J5LCBjdXN0b21lciBhbmQgbnVtYmVyT2ZEYXlzIGl0IHNob3VsZCBjYWxjdWxhdGUgZmluYWwgYW1vdW50IGluIHJlYWxcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGN1c3RvbWVyID0gT2JqZWN0LmNyZWF0ZShtb2Nrcy52YWxpZEN1c3RvbWVyKTtcbiAgICBjdXN0b21lci5hZ2UgPSA1MDtcblxuICAgIGNvbnN0IGNhckNhdGVnb3J5ID0gT2JqZWN0LmNyZWF0ZShtb2Nrcy52YWxpZENhckNhdGVnb3J5KTtcbiAgICBjYXJDYXRlZ29yeS5wcmljZSA9IDM3LjY7XG5cbiAgICBjb25zdCBudW1iZXJPZkRheXMgPSA1O1xuXG4gICAgY29uc3QgZXhwZWN0ZWQgPSBjYXJTZXJ2aWNlLmN1cnJlbmN5Rm9ybWF0LmZvcm1hdCgyNDQuNCk7XG4gICAgY29uc3QgcmVzdWx0ID0gY2FyU2VydmljZS5jYWxjdWxhdGVGaW5hbFByaWNlKFxuICAgICAgY3VzdG9tZXIsXG4gICAgICBjYXJDYXRlZ29yeSxcbiAgICAgIG51bWJlck9mRGF5c1xuICAgICk7XG5cbiAgICBleHBlY3QocmVzdWx0KS50by5iZS5kZWVwLmVxdWFsKGV4cGVjdGVkKTtcbiAgfSk7XG5cbiAgaXQoXCJnaXZlbiBhIGN1c3RvbWVyIGFuZCBhIGNhciBjYXRlZ29yeSBpdCBzaG91bGQgcmV0dXJuIGEgdHJhbnNhY3Rpb24gcmVjZWlwdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2FyID0gbW9ja3MudmFsaWRDYXI7XG5cbiAgICBjb25zdCBjYXJDYXRlZ29yeSA9IHtcbiAgICAgIC4uLm1vY2tzLnZhbGlkQ2FyQ2F0ZWdvcnksXG4gICAgICBwcmljZTogMzcuNixcbiAgICAgIGNhcklkczogW2Nhci5pZF0sXG4gICAgfTtcblxuICAgIGNvbnN0IGN1c3RvbWVyID0gT2JqZWN0LmNyZWF0ZShtb2Nrcy52YWxpZEN1c3RvbWVyKTtcbiAgICBjdXN0b21lci5hZ2UgPSAyMDtcblxuICAgIGNvbnN0IG51bWJlck9mRGF5cyA9IDU7XG5cbiAgICBjb25zdCBkdWVEYXRlID0gXCIxMCBkZSBub3ZlbWJybyBkZSAyMDIwXCI7XG5cbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgyMDIwLCAxMCwgNSk7XG5cbiAgICBzYW5kYm94LnVzZUZha2VUaW1lcnMobm93LmdldFRpbWUoKSk7XG4gICAgc2FuZGJveFxuICAgICAgLnN0dWIoY2FyU2VydmljZS5jYXJSZXBvc2l0b3J5LCBjYXJTZXJ2aWNlLmNhclJlcG9zaXRvcnkuZmluZC5uYW1lKVxuICAgICAgLnJlc29sdmVzKGNhcik7XG5cbiAgICBjb25zdCBleHBlY3RlZEFtb3VudCA9IGNhclNlcnZpY2UuY3VycmVuY3lGb3JtYXQuZm9ybWF0KDIwNi44KTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjYXJTZXJ2aWNlLnJlbnQoY3VzdG9tZXIsIGNhckNhdGVnb3J5LCBudW1iZXJPZkRheXMpO1xuXG4gICAgY29uc3QgZXhwZWN0ZWQgPSBuZXcgVHJhbnNhY3Rpb24oe1xuICAgICAgY3VzdG9tZXIsXG4gICAgICBkdWVEYXRlLFxuICAgICAgY2FyLFxuICAgICAgYW1vdW50OiBleHBlY3RlZEFtb3VudCxcbiAgICB9KTtcblxuICAgIGV4cGVjdChyZXN1bHQpLnRvLmJlLmRlZXAuZXF1YWwoZXhwZWN0ZWQpO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiMjVMQWVZOzJGQWZaLEtBQU0sQ0FBRUEsUUFBRixDQUFZQyxFQUFaLENBQWdCQyxNQUFoQixDQUF3QkMsVUFBeEIsQ0FBb0NDLFNBQXBDLDJCQUFrREMsT0FBTyxDQUFDLE9BQUQsQ0FBekQsQ0FBTixDQUNBLEtBQU0sQ0FBRUMsTUFBRiwyQkFBYUQsT0FBTyxDQUFDLE1BQUQsQ0FBcEIsQ0FBTixDQUNBLEtBQU0sQ0FBRUUsSUFBRiwyQkFBV0YsT0FBTyxDQUFDLE1BQUQsQ0FBbEIsQ0FBTixDQUNBLEtBQU1HLE9BQU0sMEJBQUdILE9BQU8sQ0FBQyxRQUFELENBQVYsQ0FBWixDQUNBLEtBQU1JLE1BQUssMEJBQUdKLE9BQU8sQ0FBQyxPQUFELENBQVYsQ0FBWCxDQUVBLEtBQU1LLFdBQVUsMEJBQUdMLE9BQU8sQ0FBQyw4QkFBRCxDQUFWLENBQWhCLENBQ0EsS0FBTU0sWUFBVywwQkFBR04sT0FBTyxDQUFDLGdDQUFELENBQVYsQ0FBakIsQ0FFQSxLQUFNTyxLQUFJLDBCQUFHTCxJQUFJLENBQUNNLFNBQUQsQ0FBWSxnQkFBWixDQUE4QixXQUE5QixDQUFQLENBQVYsQ0FFQSxLQUFNQyxNQUFLLDBCQUFHLENBQ1pDLGdCQUFnQixDQUFFVixPQUFPLENBQUMsaUNBQUQsQ0FEYixDQUVaVyxRQUFRLENBQUVYLE9BQU8sQ0FBQyx5QkFBRCxDQUZMLENBR1pZLGFBQWEsQ0FBRVosT0FBTyxDQUFDLDhCQUFELENBSFYsQ0FBSCxDQUFYLEMsd0JBTUFMLFFBQVEsQ0FBQyx5QkFBRCxDQUE0QixJQUFNLHlCQUN4QyxHQUFJa0IsV0FBVSwyQkFBRyxFQUFILENBQWQsQ0FDQSxHQUFJQyxRQUFPLDJCQUFHLEVBQUgsQ0FBWCxDQUZ3Qyx5QkFJeENqQixNQUFNLENBQUMsSUFBTSxrREFDWGdCLFVBQVUsQ0FBRyxHQUFJUixXQUFKLENBQWUsQ0FBRUUsSUFBRixDQUFmLENB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